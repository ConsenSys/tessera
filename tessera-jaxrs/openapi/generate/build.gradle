plugins {
    id "io.swagger.core.v3.swagger-gradle-plugin" version "$swaggerVersion"
}

dependencies {
    compileOnly project(":tessera-jaxrs:common-jaxrs")
    compileOnly project(":tessera-jaxrs:sync-jaxrs")
    compileOnly project(":tessera-jaxrs:transaction-jaxrs")
    compileOnly project(":tessera-jaxrs:thirdparty-jaxrs")
}

resolve {
    classpath = sourceSets.main.compileClasspath
    outputDir = file("${project.buildDir}/generated-resources/openapi")
    outputFormat = 'JSONANDYAML'
    prettyPrint = 'TRUE'
    openApiFile = file("${project.projectDir}/src/main/resources/openapi-base.yaml")
    modelConverterClasses = ['com.quorum.tessera.openapi.FullyQualifiedNameResolver']
}

// exists to have a self-documenting task name when called from CI/CD
task generateOpenApiDoc {
    dependsOn resolve
}