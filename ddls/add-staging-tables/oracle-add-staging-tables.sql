CREATE TABLE ST_TRANSACTION (CIPHER_TEXT BLOB NOT NULL, CIPHER_TEXT_NONCE BLOB NOT NULL, EXEC_HASH BLOB, DATA_ISSUES VARCHAR2(255), PRIVACY_MODE NUMBER(3), RECIPIENT_NONCE BLOB NOT NULL, SENDER_KEY BLOB NOT NULL, TIMESTAMP NUMBER(19), VALIDATION_STAGE  NUMBER(19), HASH VARCHAR2(255) NOT NULL, PRIMARY KEY (HASH));
CREATE INDEX ST_TRANSACTION_VALSTG ON ST_TRANSACTION (VALIDATION_STAGE);
CREATE TABLE ST_AFFECTED_TRANSACTION (SECURITY_HASH BLOB, AFFECTED_HASH VARCHAR2(255) NOT NULL, SOURCE_HASH VARCHAR2(255) NOT NULL, HASHBYTES BLOB, PRIMARY KEY (AFFECTED_HASH, SOURCE_HASH));
CREATE TABLE ST_TRANSACTION_RECIPIENT (BOX BLOB, INITIATOR NUMBER(1) default 0, HASH VARCHAR2(255) NOT NULL, RECIPIENT VARCHAR2(255) NOT NULL, BYTES BLOB, PRIMARY KEY (HASH, RECIPIENT));
CREATE TABLE ST_TRANSACTION_VERSION (NANOTIME NUMBER(19), PAYLOAD BLOB NOT NULL, PRIVACY_MODE NUMBER(3), TIMESTAMP NUMBER(19), HASH VARCHAR2(255) NOT NULL, RECIPIENT VARCHAR2(255) NOT NULL, BYTES BLOB, PRIMARY KEY (HASH, RECIPIENT));
ALTER TABLE ST_AFFECTED_TRANSACTION ADD CONSTRAINT STAFFECTEDTRANSACTIONSURCEHASH FOREIGN KEY (SOURCE_HASH) REFERENCES ST_TRANSACTION (HASH);
ALTER TABLE ST_TRANSACTION_RECIPIENT ADD CONSTRAINT ST_TRANSACTION_RECIPIENT_HASH FOREIGN KEY (HASH) REFERENCES ST_TRANSACTION (HASH);
ALTER TABLE ST_TRANSACTION_VERSION ADD CONSTRAINT FK_ST_TRANSACTION_VERSION_HASH FOREIGN KEY (HASH) REFERENCES ST_TRANSACTION (HASH);