plugins {
    id "java-library"
}

dependencies {

    implementation "jakarta.ws.rs:jakarta.ws.rs-api"
    implementation "org.glassfish:jakarta.json"
    implementation "jakarta.validation:jakarta.validation-api"
    implementation project(':shared')
    implementation project(':argon2')
    implementation project(':encryption:encryption-api')
    implementation "org.apache.commons:commons-lang3"
    implementation "org.jasypt:jasypt"
    runtimeOnly "org.glassfish:jakarta.el"
    runtimeOnly project(':encryption:encryption-jnacl')
    testImplementation project(':tests:test-util')
    testImplementation "org.hibernate:hibernate-validator"

    implementation "jakarta.xml.bind:jakarta.xml.bind-api"
    runtimeOnly "org.eclipse.persistence:org.eclipse.persistence.moxy"
    runtimeOnly "org.glassfish.jaxb:jaxb-runtime"

    testImplementation "nl.jqno.equalsverifier:equalsverifier"
    testImplementation "jakarta.el:jakarta.el-api"

}

description = "config"

jar {

    manifest {
        attributes(
                "Implementation-Title": project.name,
                "Implementation-Version": version,
                "Specification-Version": String.valueOf(version).replaceAll("-SNAPSHOT","")
        )
    }

}

compileJava {
    //inputs.property("moduleName", moduleName)
    doFirst {
        options.compilerArgs = [
                '--module-path', classpath.asPath,
                '--add-modules', 'jasypt',
        ]
        classpath = files()
    }
}




